# syntax=docker/dockerfile:1
# ðŸ‘† ã“ã®1è¡Œç›®ã‚’æ›¸ãã“ã¨ã§ã€æœ€æ–°ã®BuildKitã®æ©Ÿèƒ½ãŒç¢ºå®Ÿã«æœ‰åŠ¹ã«ãªã‚‹ã‚ˆï¼

FROM ubuntu:latest

# ðŸ’¡ ã“ã“ãŒBuildKitã®é­”æ³•ï¼aptã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä¸€æ™‚çš„ã«ãƒžã‚¦ãƒ³ãƒˆã™ã‚‹
RUN rm -f /etc/apt/apt.conf.d/docker-clean; echo 'Binary::apt::APT::Keep-Downloaded-Packages "true";' > /etc/apt/apt.conf.d/keep-cache
RUN --mount=type=cache,target=/var/cache/apt,sharing=locked \
    --mount=type=cache,target=/var/lib/apt \
    apt-get update && apt-get install -y gcc make git